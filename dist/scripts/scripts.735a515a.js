"use strict";angular.module("yomenTestApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/gallery/:page?",{templateUrl:"views/gallery.html",controller:"GalleryCtrl",controllerAs:"gallery"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl",controllerAs:"contact"}).otherwise({redirectTo:"/"})}]).run(["$route","$rootScope","$location",function(a,b,c){c.updatePath=function(d,e){if(c.path()!==d){var f=a.current;b.$on("$locationChangeSuccess",function(){f&&(a.current=f,f=null)}),c.path(d),e||c.replace()}},b.apiData={licensesInfo:{icons:{extra:{meta:[]}}}},b.iconsPreview={searchQuery:"",style:"",currentPage:0};for(var d=0;1e3>d;d++){var e={id:d,name:"name-"+d,tags:"tags-"+Date.now(),seqHash:"#"+d};b.apiData.licensesInfo.icons.extra.meta.push(e)}}]),angular.module("yomenTestApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("yomenTestApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("yomenTestApp").controller("ContactCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("yomenTestApp").controller("GalleryCtrl",["$scope","$rootScope","$location","$routeParams","$timeout","$window","filterFilter",function(a,b,c,d,e,f,g){console.log("START GalleryCtrl"),this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"];var h=function(a,b){for(var c=[],d=0,e=0,f=a.length;f>e;e+=b)d++,c.push(a.slice(e,e+b));return c};d.page?a.currentPage=d.page:a.currentPage=0;var i,j,k,l,m,n,o=1,p=40,q=5,r=[],s=a.currentPage;a.items=[];var t=a.$watch("currentPage",function(a,d){a===d||b.iconsPreview.searchQuery.length>0||(console.log("CHANGE LINK ",a,d),c.updatePath("/gallery/"+a))});a.updateSearch=function(){o=1,a.currentPage=s=0,w.scrollTop=0,v()},a.goToPage=function(b){o=1,a.currentPage=s=b,w.scrollTop=1,v()};var u=function(){return g(b.apiData.licensesInfo.icons.extra.meta,b.iconsPreview.searchQuery)},v=function(){a.items=u();for(var b=0,c=[];b<a.items.length;)c.push(b++);a.pages=h(c,p),a.pages[a.currentPage]&&(a.rangeModel={from:a.pages[a.currentPage][0],to:a.pages[a.currentPage][a.pages[a.currentPage].length-1]+1},a.items=a.items.slice(a.rangeModel.from,a.rangeModel.to))};if(v(),parseInt(d.page)>a.pages.length)return c.path("/"),void(a.currentPage=0);var w=angular.element(document)[0].getElementById("gallery");a.currentPage>0&&e(function(){w.scrollTop=q+10});var x=function(){i=angular.element(document)[0].getElementById("gallery").getBoundingClientRect(),j=angular.element(document)[0].getElementsByClassName("mid")[0].getBoundingClientRect(),k=Math.floor(i.width/j.width),l=p/k,m=l*j.height;for(var a=0;100>a;a++)r[a]=Math.floor(m*(a+1))},y=function(){if(i){var b=Math.floor(w.scrollTop),c=q,d=Math.floor(m*o-i.height-q);if(n=Math.floor(m*s),c>=b&&a.currentPage>0)return void z();if(b>=d)return void A();for(var e=s;b+n>r[e]-i.height/2;)e++;a.currentPage=e,a.$apply()}},z=function(){return a.rangeModel.from-=p,a.rangeModel.from<0?void(a.rangeModel.from=0):(s--,o++,a.items=u().slice(a.rangeModel.from,a.rangeModel.to),a.$apply(),void(w.scrollTop=m))},A=function(){return a.rangeModel.to+=p,a.rangeModel.to>a.pages[a.pages.length-1][a.pages[a.pages.length-1].length-1]?void(a.rangeModel.to=a.pages[a.pages.length-1][a.pages[a.pages.length-1].length-1]+1):(o++,a.items=u().slice(a.rangeModel.from,a.rangeModel.to),void a.$apply())};angular.element(f).bind("resize",x),angular.element(w).on("scroll",function(){y()}),e(function(){x()}),a.$on("$destroy",function(){t(),angular.element(w).off("scroll"),angular.element(f).unbind("resize"),console.log("END GalleryCtrl")})}]),angular.module("yomenTestApp").run(["$templateCache",function(a){a.put("views/about.html","<h1>About</h1>"),a.put("views/contact.html","<h1>Contact</h1>"),a.put("views/gallery.html",'<h3>Gallery</h3> <input type="text" ng-model="iconsPreview.searchQuery" ng-change="updateSearch()"> <div class="btn-pagination"> <button ng-repeat="item in pages" ng-class="{active: currentPage == $index}" type="button" class="btn btn-primary btn-xs" ng-click="goToPage($index)">{{$index}} </button> </div> <div id="gallery"> <section> <figure class="mid" ng-repeat="(i, item) in items | filter:iconsPreview.searchQuery"> <figcaption> <p>Icon title:</p> <h2><a href="/icons/{{iconsPreview.style}}/{{item.name}}"><strong class="name" ng-bind="item.name"></strong></a></h2> <p>Tags for icon: <strong class="tag" ng-bind="item.tags"></strong></p> <p>Icon number: <strong class="seq" ng-bind="item.seqHash"></strong></p> </figcaption> </figure> <figure class="empty mid" ng-repeat="e in emptyItems"></figure> </section> </div> '),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.c582c4d1.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>')}]);